# 트리 시각화 도구 (Tree Helper)

데이터 구조 학습을 위한 인터랙티브 트리 시각화 웹 애플리케이션입니다. BST, AVL 트리, B-트리, B+ 트리의 삽입/삭제 연산을 단계별로 시각화하여 보여줍니다.

## 주요 기능

### 1. 트리 시뮬레이션 모드
- **4가지 트리 타입 지원**
  - 이진 탐색 트리 (BST)
  - AVL 트리 (자가 균형 이진 탐색 트리)
  - B-트리
  - B+ 트리

- **단계별 시각화**
  - 각 연산의 모든 단계를 시각화로 표시
  - 노드 생성, 삽입, 삭제, 회전, 분할, 병합 등 세부 과정 확인 가능
  - 현재 처리 중인 노드 하이라이트 표시
  - 각 단계마다 한국어 설명 제공

- **명령어 입력 방식**
  - 개별 입력: 삽입/삭제 선택 후 값 입력
  - 일괄 입력: `i 30, d 45, i 20` 형식으로 여러 명령 한번에 입력
    - `i`: 삽입 (insert)
    - `d`: 삭제 (delete)

- **B-트리 차수 설정**
  - B-트리와 B+ 트리의 차수(m) 조정 가능
  - 기본값: 3, 범위: 3-10

- **시각화 컨트롤**
  - 이전/다음 단계 이동
  - 확대/축소 기능
  - 리셋 기능

### 2. 문제 풀이 모드
- **랜덤 문제 생성**
  - 연산 개수 설정 (5-30개)
  - 트리 타입 선택
  - B-트리 차수 설정

- **답안 형식**
  - **BST/AVL 트리**: `높이,루트키,왼쪽노드수,오른쪽노드수#단말노드1,단말노드2,...`
    - 예: `3,50,2,3#10,25,60,80`
  - **B-트리/B+ 트리**: `{키1,키2},{키3,키4,키5},...`
    - 예: `{10,20},{30,40,50}`

- **답안 확인 및 해설**
  - 정답/오답 즉시 확인
  - 정답 보기 버튼으로 시뮬레이션 자동 실행

## 기술 스택

- **프레임워크**: Next.js 16 (App Router)
- **언어**: TypeScript (strict mode, no any types)
- **스타일링**: Tailwind CSS 4
- **렌더링**: HTML5 Canvas API
- **상태 관리**: React Hooks (useState, useEffect, useCallback, useMemo)

## 프로젝트 구조

```
tree-helper/
├── app/
│   ├── page.tsx              # 메인 페이지 (Suspense로 HomeView 감싸기)
│   └── practice/
│       └── page.tsx          # 문제 풀이 페이지 (PracticeView 불러오기)
├── views/
│   ├── Home/
│   │   └── index.tsx         # 메인 페이지 View (트리 시뮬레이션 로직)
│   └── Practice/
│       └── index.tsx         # 문제 풀이 View (문제 생성 및 답안 체크 로직)
├── components/
│   ├── InputPanel.tsx        # 명령어 입력 패널
│   └── TreeVisualization.tsx # 트리 시각화 캔버스
├── lib/
│   ├── types.ts             # 타입 정의
│   ├── constants.ts         # 상수 정의
│   ├── bst.ts              # BST 구현
│   ├── avl.ts              # AVL 트리 구현
│   ├── btree.ts            # B-트리 구현
│   ├── bplustree.ts        # B+ 트리 구현
│   ├── treeLayout.ts       # 트리 레이아웃 알고리즘
│   ├── problemGenerator.ts  # 문제 생성 로직
│   └── renderers/
│       ├── BSTRenderer.ts   # BST/AVL 렌더러
│       ├── BTreeRenderer.ts # B-트리 렌더러
│       └── BPlusTreeRenderer.ts # B+ 트리 렌더러
└── README.md
```

## 설치 및 실행

### 요구 사항
- Node.js 18 이상

### 설치

```bash
npm install
```

### 개발 서버 실행

```bash
npm run dev
```

브라우저에서 [http://localhost:3000](http://localhost:3000)을 열어 확인하세요.

### 프로덕션 빌드

```bash
npm run build
npm start
```

### 타입 체크

```bash
npx tsc --noEmit
```

## 사용 방법

### 시뮬레이션 모드

1. 왼쪽 패널에서 트리 타입 선택
2. B-트리/B+ 트리의 경우 차수(m) 설정
3. 명령어 입력:
   - **개별 입력**: 삽입/삭제 선택 → 값 입력 → 추가 버튼
   - **일괄 입력**: `i 30, d 45, i 20` 형식으로 입력
4. "시작하기" 버튼 클릭
5. 이전/다음 버튼으로 각 단계 확인

### 문제 풀이 모드

1. 메인 페이지에서 "📝 문제 풀이 모드" 버튼 클릭
2. 트리 타입, 연산 개수 설정
3. "새 문제 생성" 버튼 클릭
4. 연산 목록을 보고 최종 트리 상태 계산
5. 답안 입력 후 "정답 확인" 버튼 클릭
6. "정답 보기 (시뮬레이션)" 버튼으로 해설 확인

## 주요 알고리즘

### 트리 레이아웃
- **BST/AVL**: 중위 순회(inorder traversal)를 사용하여 왼쪽에서 오른쪽 순서로 노드 배치
- **B-트리/B+ 트리**: 레벨별 BFS 방식으로 레이아웃 계산

### 연산 단계 추적
각 트리 클래스는 삽입/삭제 연산 시 모든 중간 상태를 `OperationStep` 배열로 반환:
- 노드 생성
- 탐색 경로
- 회전 (AVL)
- 분할/병합 (B-트리)
- 최종 상태

### 렌더링 분리
View 로직을 별도 Renderer 클래스로 분리하여 관심사 분리 및 재사용성 향상

## 타입 안전성

- 모든 코드는 TypeScript strict mode로 작성
- `any` 타입 사용 금지
- 명시적 타입 선언으로 런타임 에러 방지

## 라이선스

MIT

## 기여

이슈 및 풀 리퀘스트를 환영합니다.

## 개발 노트

### 주요 설계 결정

1. **Views 아키텍처**: 페이지별 폴더 구조로 View 로직 분리
   - `app/` - 라우팅과 Suspense 경계 관리만 담당
   - `views/` - 페이지별 비즈니스 로직과 상태 관리
   - 관심사 분리로 유지보수성 및 테스트 용이성 향상

2. **Canvas API 사용**: SVG 대비 대량의 노드 렌더링 시 성능 우수

3. **Renderer 패턴**: 트리 로직과 렌더링 로직 분리로 유지보수성 향상
   - 각 트리 타입별 독립적인 Renderer 클래스
   - 트리 데이터 구조와 시각화 로직의 완전한 분리

4. **Step-by-step 추적**: 각 연산의 모든 중간 상태를 저장하여 교육 효과 극대화

5. **Inorder 레이아웃**: 노드 겹침 방지를 위한 중위 순회 기반 레이아웃

### 향후 개선 사항

- [ ] 애니메이션 효과 추가
- [ ] 더 많은 트리 타입 지원 (Red-Black Tree, Splay Tree 등)
- [ ] 문제 풀이 기록 저장
- [ ] 트리 상태 공유 기능 (URL 파라미터)
- [ ] 모바일 반응형 UI 개선
